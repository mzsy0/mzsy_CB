"""
é‚¢ä¸è¡Œï½œç­–ç•¥åˆ†äº«ä¼š
è‚¡ç¥¨é‡åŒ–ç­–ç•¥æ¡†æ¶ğ“Ÿğ“»ğ“¸

ç‰ˆæƒæ‰€æœ‰ Â©ï¸ é‚¢ä¸è¡Œ
å¾®ä¿¡: xbx1717

æœ¬ä»£ç ä»…ä¾›ä¸ªäººå­¦ä¹ ä½¿ç”¨ï¼Œæœªç»æˆæƒä¸å¾—å¤åˆ¶ã€ä¿®æ”¹æˆ–ç”¨äºå•†ä¸šç”¨é€”ã€‚

Author: é‚¢ä¸è¡Œ
"""
import pandas as pd

from core.model.strategy_config import StrategyConfig


def filter_stock(df, strategy: StrategyConfig) -> pd.DataFrame:
    """
    è¿‡æ»¤å‡½æ•°ï¼Œåœ¨é€‰è‚¡å‰è¿‡æ»¤
    :param df: æ•´ç†å¥½çš„æ•°æ®ï¼ŒåŒ…å«å› å­ä¿¡æ¯ï¼Œå¹¶åšè¿‡å‘¨æœŸè½¬æ¢
    :param strategy: ç­–ç•¥é…ç½®
    :return: è¿”å›è¿‡æ»¤åçš„æ•°æ®

    ### df åˆ—è¯´æ˜
    åŒ…å«åŸºç¡€åˆ—ï¼š  ['äº¤æ˜“æ—¥æœŸ', 'è‚¡ç¥¨ä»£ç ', 'è‚¡ç¥¨åç§°', 'ä¸Šå¸‚è‡³ä»Šäº¤æ˜“å¤©æ•°', 'å¤æƒå› å­', 'å¼€ç›˜ä»·', 'æœ€é«˜ä»·',
                'æœ€ä½ä»·', 'æ”¶ç›˜ä»·', 'æˆäº¤é¢', 'æ˜¯å¦äº¤æ˜“', 'æµé€šå¸‚å€¼', 'æ€»å¸‚å€¼', 'ä¸‹æ—¥_å¼€ç›˜æ¶¨åœ', 'ä¸‹æ—¥_æ˜¯å¦ST', 'ä¸‹æ—¥_æ˜¯å¦äº¤æ˜“',
                'ä¸‹æ—¥_æ˜¯å¦é€€å¸‚']
    ä»¥åŠconfigä¸­é…ç½®å¥½çš„ï¼Œå› å­è®¡ç®—çš„ç»“æœåˆ—ã€‚

    ### strategy æ•°æ®è¯´æ˜
    - strategy.name: ç­–ç•¥åç§°
    - strategy.hold_period: æŒä»“å‘¨æœŸ
    - strategy.select_num: é€‰è‚¡æ•°é‡
    - strategy.factor_name: å¤åˆå› å­åç§°
    - strategy.factor_list: é€‰è‚¡å› å­åˆ—è¡¨
    - strategy.filter_list: è¿‡æ»¤å› å­åˆ—è¡¨
    - strategy.factor_columns: é€‰è‚¡+è¿‡æ»¤å› å­çš„åˆ—å
    """
    return df


def calc_select_factor(df, strategy: StrategyConfig) -> pd.DataFrame:
    """
    è®¡ç®—å¤åˆé€‰è‚¡å› å­
    :param df: æ•´ç†å¥½çš„æ•°æ®ï¼ŒåŒ…å«å› å­ä¿¡æ¯ï¼Œå¹¶åšè¿‡å‘¨æœŸè½¬æ¢
    :param strategy: ç­–ç•¥é…ç½®
    :return: è¿”å›è¿‡æ»¤åçš„æ•°æ®

    ### df åˆ—è¯´æ˜
    åŒ…å«åŸºç¡€åˆ—ï¼š  ['äº¤æ˜“æ—¥æœŸ', 'è‚¡ç¥¨ä»£ç ', 'è‚¡ç¥¨åç§°', 'ä¸Šå¸‚è‡³ä»Šäº¤æ˜“å¤©æ•°', 'å¤æƒå› å­', 'å¼€ç›˜ä»·', 'æœ€é«˜ä»·',
                'æœ€ä½ä»·', 'æ”¶ç›˜ä»·', 'æˆäº¤é¢', 'æ˜¯å¦äº¤æ˜“', 'æµé€šå¸‚å€¼', 'æ€»å¸‚å€¼', 'ä¸‹æ—¥_å¼€ç›˜æ¶¨åœ', 'ä¸‹æ—¥_æ˜¯å¦ST', 'ä¸‹æ—¥_æ˜¯å¦äº¤æ˜“',
                'ä¸‹æ—¥_æ˜¯å¦é€€å¸‚']
    ä»¥åŠconfigä¸­é…ç½®å¥½çš„ï¼Œå› å­è®¡ç®—çš„ç»“æœåˆ—ã€‚

    ### strategy æ•°æ®è¯´æ˜
    - strategy.name: ç­–ç•¥åç§°
    - strategy.hold_period: æŒä»“å‘¨æœŸ
    - strategy.select_num: é€‰è‚¡æ•°é‡
    - strategy.factor_name: å¤åˆå› å­åç§°
    - strategy.factor_list: é€‰è‚¡å› å­åˆ—è¡¨
    - strategy.filter_list: è¿‡æ»¤å› å­åˆ—è¡¨
    - strategy.factor_columns: é€‰è‚¡+è¿‡æ»¤å› å­çš„åˆ—å
    """
    # é»˜è®¤å¤åˆå› å­è®¡ç®—é€»è¾‘å¦‚ä¸‹
    return pd.DataFrame({
        strategy.factor_name: strategy.calc_select_factor_default(df)
    }, index=df.index)
